(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(t,e,a){t.exports=a(56)},42:function(t,e,a){},43:function(t,e,a){},44:function(t,e,a){},45:function(t,e,a){},46:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},54:function(t,e,a){},55:function(t,e,a){},56:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),l=a(20),o=a.n(l),i=a(16),c=a(13),s=a(18),u=a(30),d=(a(42),a(6)),m=a(7),p=a(10),h=a(8),f=a(9),v=a(15),b=(a(43),function(t){function e(){return Object(d.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header"},r.a.createElement("h3",{className:"text-muted"},"My Blog")),r.a.createElement("main",null,this.props.children),r.a.createElement("div",{className:"footer"},r.a.createElement("p",{className:"text-center"},"Developed by Kane Wei.")))}}]),e}(n.Component)),E=(a(44),a(58)),y=(a(45),function(t){return r.a.createElement(E.a,{className:"button",variant:t.variant,size:t.size,onClick:t.onClick,disabled:t.disabled||t.loading,type:t.type},t.name)}),g=(a(46),function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.data.date),r.a.createElement("td",null,r.a.createElement(i.b,{to:"/article/"+t.data._id},t.data.title)),r.a.createElement("td",null,t.data.author))}),j=function(t,e){fetch("http://localhost:8080/blog/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title.value,author:t.author.value,body:t.body.value})}).then(function(t){if(201!==t.status)throw new Error("Failed to create post.");return t.json()}).then(function(){e("/")})},O=function(t,e,a){fetch("http://localhost:8080/blog/post/"+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title.value,author:t.author.value,body:t.body.value})}).then(function(t){if(200!==t.status)throw new Error("Failed to edit post.");return t.json()}).then(function(){a.goBack()})},k=function(t,e){fetch("http://localhost:8080/blog/post/"+t,{method:"DELETE"}).then(function(t){if(200!==t.status)throw new Error("Failed to delete post.");return t.json()}).then(function(){e.goBack()})},C=function(t){function e(){var t,a;Object(d.a)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).createPostHandler=function(){a.props.history.push("/post")},a.artilcleHandler=function(t){a.props.history.push("/article/"+t)},a}return Object(f.a)(e,t),Object(m.a)(e,[{key:"componentWillMount",value:function(){var t;t=this.props.getPosts,fetch("http://localhost:8080/blog/posts",{method:"GET"}).then(function(t){if(200!==t.status)throw new Error("Failed to get posts.");return t.json()}).then(function(e){t(e.posts)})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(y,{onClick:this.createPostHandler,variant:"primary",size:"sm",name:"Post"})),r.a.createElement("table",{className:""},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Author"))),r.a.createElement("tbody",null,this.props.posts.map(function(e){return r.a.createElement(g,{data:e,key:e._id,onClick:t.artilcleHandler})}))))}}]),e}(n.Component),N=Object(c.b)(function(t){return{posts:t.posts}},function(t){return{getPosts:function(e){return t({type:"GET_POSTS",posts:e})}}})(C),w=a(22),H=a(12),T=(a(52),function(t){function e(){var t,a;Object(d.a)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).state={articleForm:{title:{value:"",valid:!1},author:{value:"",valid:!1},body:{value:"",valid:!1}},button:{name:"",handler:null},formIsValid:!1,isEditing:!1},a.inputChangeHandler=function(t,e){a.setState(function(a){var n=e.length>0,r=Object(H.a)({},a.articleForm,Object(w.a)({},t,Object(H.a)({},a.articleForm[t],{valid:n,value:e}))),l=!0;for(var o in r)l=l&&r[o].valid;return{articleForm:r,formIsValid:l}})},a.postHandler=function(t){t.preventDefault(),j(a.state.articleForm,a.props.history.push)},a.saveHandler=function(t){t.preventDefault();var e=a.props.article._id;O(a.state.articleForm,e,a.props.history)},a.postCancelledHandler=function(){a.props.history.goBack()},a}return Object(f.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.isEditing?this.setState(function(e){var a=Object(H.a)({},e.articleForm,{title:{value:t.props.article.title,valid:!0},author:{value:t.props.article.author,valid:!0},body:{value:t.props.article.body,valid:!0}}),n=!0;for(var r in a)n=n&&a[r].valid;return{articleForm:a,formIsValid:n,button:Object(H.a)({},e.button,{name:"Save",handler:t.saveHandler})}}):this.setState(function(e){return{button:Object(H.a)({},e.button,{name:"Post",handler:t.postHandler})}})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){return t.state.button.handler(e,{title:t.state.articleForm.title.value,author:t.state.articleForm.author.value,body:t.state.articleForm.body.value})}},r.a.createElement("div",{className:"from-group"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{id:"title",className:"input",placeholder:"Title",value:this.state.articleForm.title.value,onChange:function(e){return t.inputChangeHandler(e.target.id,e.target.value,e.target.files)},required:!0})),r.a.createElement("div",{className:"from-group"},r.a.createElement("label",null,"Author"),r.a.createElement("input",{id:"author",className:"input",placeholder:"Author",value:this.state.articleForm.author.value,onChange:function(e){return t.inputChangeHandler(e.target.id,e.target.value,e.target.files)},required:!0})),r.a.createElement("div",{className:"from-group"},r.a.createElement("label",null,"Body"),r.a.createElement("textarea",{id:"body",className:"input",placeholder:"Write something",value:this.state.articleForm.body.value,onChange:function(e){return t.inputChangeHandler(e.target.id,e.target.value,e.target.files)}})),r.a.createElement("div",{className:"from-group text-center"},r.a.createElement(y,{type:"Submit",variant:"primary",size:"sm",disabled:!this.state.formIsValid,name:this.state.button.name}),r.a.createElement(y,{variant:"outline-secondary",size:"sm",name:"Cancel",onClick:this.postCancelledHandler}))))}}]),e}(n.Component)),F=Object(c.b)(function(t){return{article:t.singleData}})(T),S=(a(53),function(t){return r.a.createElement("article",null,r.a.createElement("h4",{className:"text-center"},t.data.title),r.a.createElement("p",{className:"text article-body"},t.data.body),r.a.createElement("p",{className:"time text"},"Posted by ",t.data.author," at ",t.data.postTime),t.data.modified?r.a.createElement("p",{className:"time text"},"Modified at ",t.data.modifyTime):"")}),P=(a(54),function(t){function e(){var t,a;Object(d.a)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).articleBackHandler=function(){a.props.history.goBack()},a.articleEditHandler=function(){a.props.history.push("/article/"+a.props.article.id+"/edit")},a.articleDeleteHandler=function(){var t=a.props.article._id;k(t,a.props.history)},a}return Object(f.a)(e,t),Object(m.a)(e,[{key:"componentWillMount",value:function(){var t,e=this.props.match.params.articleId;t=this.props.getPost,fetch("http://localhost:8080/blog/post/"+e,{method:"GET"}).then(function(t){if(200!==t.status)throw new Error("Failed to get post.");return t.json()}).then(function(e){t(e.post)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,{data:this.props.article}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(y,{variant:"outline-secondary",size:"sm",name:"Back",onClick:this.articleBackHandler})),r.a.createElement("div",{className:"text-right col-md-12"},r.a.createElement(y,{variant:"info",size:"sm",name:"Edit",onClick:this.articleEditHandler}),r.a.createElement(y,{variant:"danger",size:"sm",name:"Delete",onClick:this.articleDeleteHandler}))))}}]),e}(n.Component)),D=Object(c.b)(function(t){return{article:t.singleData}},function(t){return{getPost:function(e){return t({type:"GET_SINGLE_POST",post:e})}}})(P),x=(a(55),function(t){function e(){return Object(d.a)(this,e),Object(p.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b,null,r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/post",render:function(t){return r.a.createElement(F,Object.assign({},t,{isEditing:!1}))}}),r.a.createElement(v.a,{path:"/article/:articleId/edit",render:function(t){return r.a.createElement(F,Object.assign({},t,{isEditing:!0}))}}),r.a.createElement(v.a,{path:"/article/:articleId",component:D}),r.a.createElement(v.a,{path:"/",exact:!0,component:N}))))}}]),e}(n.Component)),B={posts:[],singleData:{}},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_POSTS":return Object(H.a)({},t,{posts:e.posts});case"GET_SINGLE_POST":return Object(H.a)({},t,{singleData:e.post});default:return t}},_=Object(s.c)(I,Object(s.a)(u.a));o.a.render(r.a.createElement(c.a,{store:_},r.a.createElement(i.a,null,r.a.createElement(x,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.07db994b.chunk.js.map